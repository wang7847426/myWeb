webpackJsonp([9],{HZhJ:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={data:function(){return{key:this.$route.params.key,name:"",phone:"",password:"",text:"",userInfo:[],formData:new FormData,imgs:{},imgLen:0,radioVal:""}},watch:{radioVal:function(t){console.log(t)}},created:function(){},methods:{addImg:function(t){var e=this.$refs.inputer;this.fil=e.files;for(var a=this.imgLen,i=(this.fil.length,0);i<this.fil.length;i++){if(Math.floor(this.fil[i].size/1024)>5242880)return alert("请选择5M以内的图片！"),!1;this.imgLen++,this.$set(this.imgs,this.fil[i].name+"?"+(new Date).getTime()+i,this.fil[i])}},getObjectURL:function(t){var e=null;return void 0!=window.createObjectURL?e=window.createObjectURL(t):void 0!=window.URL?e=window.URL.createObjectURL(t):void 0!=window.webkitURL&&(e=window.webkitURL.createObjectURL(t)),e},delImg:function(t){this.$delete(this.imgs,t),this.imgLen--},submit:function(){var t=this;for(var e in this.imgs){var a=e.split("?")[0];this.formData.append("multipartFiles",this.imgs[e],a)}this.$http.post("/opinion/feedback",this.formData,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){t.alertShow=!0})},axiosRegister:function(){var t=this;for(var e in this.imgs){var a=e.split("?")[0];this.formData.append("image",this.imgs[e],a)}this.formData.append("key",this.key),this.formData.append("name",this.name),this.formData.append("phone",this.phone),this.formData.append("passwd",this.password),this.formData.append("text",this.text),this.$axios.post("https://www.apiopen.top/createUser",this.formData,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){200==e.status&&(t.$toast("注册成功了"),t.name="",t.phone="",t.password="",t.text="",t.imgs={},t.imgLen=0,t.$router.push({path:"/personal"}))}).catch(function(t){console.log(t)})}}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrapper"},[a("form",[a("ul",{staticClass:"upload-imgs"},[t.imgLen>=1?t._e():a("li",[a("input",{ref:"inputer",staticClass:"upload",attrs:{type:"file",multiple:"",accept:"image/png,image/jpeg,image/gif,image/jpg"},on:{change:t.addImg}}),t._v(" "),t._m(0)]),t._v(" "),t._l(t.imgs,function(e,i){return a("li",{staticClass:"upload-success"},[a("div",[a("img",{attrs:{src:t.getObjectURL(e)}})]),t._v(" "),a("a",{staticClass:"close",on:{click:function(e){return t.delImg(i)}}},[t._v("×")])])})],2),t._v(" "),a("mt-field",{attrs:{label:"姓名",placeholder:"请输入姓名"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),t._v(" "),a("mt-field",{attrs:{label:"用户名",placeholder:"请输入用户名"},model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}}),t._v(" "),a("mt-field",{attrs:{label:"密码",placeholder:"请输入密码",type:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),t._v(" "),a("mt-field",{attrs:{label:"签名",placeholder:"请输入签名"},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}}),t._v(" "),a("mt-radio",{attrs:{title:"要不要好的体验？",options:["要","不要"]},model:{value:t.radioVal,callback:function(e){t.radioVal=e},expression:"radioVal"}})],1),t._v(" "),a("mt-button",{attrs:{type:"danger",size:"normal"},on:{click:t.axiosRegister}},[t._v("注册")])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("a",{staticClass:"add"},[e("i",{staticClass:"iconfont"}),e("p",[this._v("点击上传")])])}]};var n=a("C7Lr")(i,s,!1,function(t){a("ktz3")},"data-v-11c825f0",null);e.default=n.exports},ktz3:function(t,e){}});
//# sourceMappingURL=9.a349ed4d19f10f86d1df.js.map